<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indosphere: The Grand Archive</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;500;600;700&family=Noto+Serif:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <div class="brand">
            <span class="brand-icon">✦</span>
            <span>Indosphere</span>
            <span class="brand-subtitle">The Grand Archive</span>
        </div>
        
        <div class="view-switcher">
            <button class="view-btn active" data-view="combined" title="Combined View">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="3" y="14" width="18" height="7"></rect>
                </svg>
                <span>Combined</span>
            </button>
            <button class="view-btn" data-view="network" title="Network Only">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="5" r="2"></circle>
                    <circle cx="5" cy="19" r="2"></circle>
                    <circle cx="19" cy="19" r="2"></circle>
                    <line x1="12" y1="7" x2="5" y2="17"></line>
                    <line x1="12" y1="7" x2="19" y2="17"></line>
                </svg>
                <span>Network</span>
            </button>
            <button class="view-btn" data-view="timeline" title="Timeline Only">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <circle cx="7" cy="12" r="2"></circle>
                    <circle cx="12" cy="12" r="2"></circle>
                    <circle cx="17" cy="12" r="2"></circle>
                </svg>
                <span>Timeline</span>
            </button>
        </div>

        <div class="controls">
            <div class="filter-container">
                <button id="filterBtn" onclick="toggleFilterMenu()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                    Filters
                </button>
                
                <div id="filterMenu" class="filter-dropdown">
                    <div class="filter-header">
                        <h3>Filters</h3>
                        <button class="clear-filters" onclick="clearAllFilters()">Clear All</button>
                    </div>
                    
                    <div class="filter-section">
                        <h4>Regions</h4>
                        <div class="checkbox-grid">
                            <label><input type="checkbox" class="region-chk" value="North" onchange="updateGraph()"> North</label>
                            <label><input type="checkbox" class="region-chk" value="South" onchange="updateGraph()"> South</label>
                            <label><input type="checkbox" class="region-chk" value="East" onchange="updateGraph()"> East</label>
                            <label><input type="checkbox" class="region-chk" value="West" onchange="updateGraph()"> West</label>
                            <label><input type="checkbox" class="region-chk" value="Central" onchange="updateGraph()"> Central</label>
                            <label><input type="checkbox" class="region-chk" value="Global" onchange="updateGraph()"> Global</label>
                        </div>
                    </div>

                    <hr>

                    <div class="filter-section">
                        <h4>Advaita Vedanta</h4>
                        <label><input type="checkbox" class="school-chk" value="Advaita" onchange="updateGraph()"> General Advaita</label>
                        <div class="sub-group">
                            <label><input type="checkbox" class="school-chk" value="Sringeri" onchange="updateGraph()"> Sringeri</label>
                            <label><input type="checkbox" class="school-chk" value="Puri" onchange="updateGraph()"> Puri</label>
                            <label><input type="checkbox" class="school-chk" value="Jyotir" onchange="updateGraph()"> Jyotir</label>
                            <label><input type="checkbox" class="school-chk" value="Dwaraka" onchange="updateGraph()"> Dwaraka</label>
                            <label><input type="checkbox" class="school-chk" value="Kanchi" onchange="updateGraph()"> Kanchi</label>
                            <label><input type="checkbox" class="school-chk" value="RKM" onchange="updateGraph()"> Ramakrishna Mission</label>
                        </div>

                        <h4>Dvaita Vedanta</h4>
                        <label><input type="checkbox" class="school-chk" value="Dvaita" onchange="updateGraph()"> General Dvaita</label>
                        <div class="sub-group">
                            <label><input type="checkbox" class="school-chk" value="Vyasaraja" onchange="updateGraph()"> Vyasaraja Matha</label>
                            <label><input type="checkbox" class="school-chk" value="Rayara" onchange="updateGraph()"> Raghavendra Matha</label>
                            <label><input type="checkbox" class="school-chk" value="Uttaradi" onchange="updateGraph()"> Uttaradi Matha</label>
                        </div>

                        <h4>Vishishtadvaita</h4>
                        <label><input type="checkbox" class="school-chk" value="Vishishtadvaita" onchange="updateGraph()"> General</label>
                        <div class="sub-group">
                            <label><input type="checkbox" class="school-chk" value="Vadakalai" onchange="updateGraph()"> Vadakalai</label>
                            <label><input type="checkbox" class="school-chk" value="Tenkalai" onchange="updateGraph()"> Tenkalai</label>
                        </div>

                        <h4>Shaiva Siddhanta</h4>
                        <div class="sub-group">
                            <label><input type="checkbox" class="school-chk" value="Shaiva Siddhanta" onchange="updateGraph()"> Nayanars & Acharyas</label>
                        </div>

                        <h4>Other Vedanta</h4>
                        <label><input type="checkbox" class="school-chk" value="Shuddhadvaita" onchange="updateGraph()"> Shuddhadvaita (Pushtimarg)</label>
                        <label><input type="checkbox" class="school-chk" value="Dvaitadvaita" onchange="updateGraph()"> Dvaitadvaita (Nimbarka)</label>
                        <label><input type="checkbox" class="school-chk" value="Gaudiya" onchange="updateGraph()"> Gaudiya</label>
                        <label><input type="checkbox" class="school-chk" value="Bhedabheda" onchange="updateGraph()"> Bhedabheda</label>
                        <label><input type="checkbox" class="school-chk" value="Shaiva Vedanta" onchange="updateGraph()"> Shaiva Vedanta (Srikantha)</label>

                        <h4>Nastika</h4>
                        <label><input type="checkbox" class="school-chk" value="Buddhism" onchange="updateGraph()"> All Buddhism</label>
                        <div class="sub-group">
                            <label><input type="checkbox" class="school-chk" value="Theravada" onchange="updateGraph()"> Theravada</label>
                            <label><input type="checkbox" class="school-chk" value="Mahayana" onchange="updateGraph()"> Mahayana</label>
                            <label><input type="checkbox" class="school-chk" value="Vajrayana" onchange="updateGraph()"> Vajrayana</label>
                            <label><input type="checkbox" class="school-chk" value="Zen" onchange="updateGraph()"> Zen</label>
                        </div>
                        <label><input type="checkbox" class="school-chk" value="Jainism" onchange="updateGraph()"> Jainism</label>
                        <label><input type="checkbox" class="school-chk" value="Charvaka" onchange="updateGraph()"> Charvaka/Ajivika</label>

                        <h4>Philosophy & Fields</h4>
                        <label><input type="checkbox" class="school-chk" value="Nyaya" onchange="updateGraph()"> Nyaya & Vaisheshika</label>
                        <label><input type="checkbox" class="school-chk" value="Samkhya" onchange="updateGraph()"> Samkhya & Yoga</label>
                        <label><input type="checkbox" class="school-chk" value="Mimamsa" onchange="updateGraph()"> Mimamsa</label>
                        <label><input type="checkbox" class="school-chk" value="Kashmir" onchange="updateGraph()"> Kashmir Shaivism</label>
                        <label><input type="checkbox" class="school-chk" value="Indology" onchange="updateGraph()"> Indology</label>
                        <label><input type="checkbox" class="school-chk" value="Music" onchange="updateGraph()"> Music & Arts</label>
                        <label><input type="checkbox" class="school-chk" value="Science" onchange="updateGraph()"> Modern Science</label>
                        <label><input type="checkbox" class="school-chk" value="Modern" onchange="updateGraph()"> Modern Reformers</label>
                    </div>
                </div>
            </div>

            <div style="position:relative;">
                <div class="search-wrapper">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" id="search" placeholder="Search figures..." autocomplete="off">
                </div>
                <div id="search-results"></div>
            </div>
        </div>
    </header>

    <div class="main-container">
        <div id="network-container" class="view-section">
            <div id="network"></div>
            <div class="legend">
                <div class="legend-item">
                    <div class="symbol-star">★</div> Deity
                </div>
                <div class="legend-item">
                    <div class="symbol-dot"></div> People
                </div>
                <div class="legend-item">
                    <div class="symbol-line"></div> Lineage
                </div>
                <div id="total-counter">Loading...</div>
            </div>
        </div>

        <div id="timeline-container" class="view-section">
            <div id="drag-gutter" title="Drag to resize"></div>
            <div id="mytimeline"></div>
        </div>

        <div id="side-panel">
            <button class="panel-close" onclick="closePanel()">×</button>
            <div class="panel-content" id="panel-content">
                <div id="p-name" class="p-title"></div>
                <div id="p-religion" class="religion-tag"></div> 
                <span id="p-dates" class="p-value" style="color:#aaa"></span>
                <div id="human-fields">
                    <span class="p-label">School</span>
                    <div id="p-school" class="p-value" style="color: var(--gold)"></div>
                    <span class="p-label">Region</span>
                    <div id="p-region" class="p-value"></div>
                    <span class="p-label">Magnum Opus</span>
                    <div id="p-work" class="p-value iast"></div>
                    <span class="p-label">Other Works</span>
                    <ul id="p-others" class="works-list"></ul>
                </div>
                <div id="deity-fields" style="display:none;">
                    <span class="p-label">Other Names</span>
                    <div id="p-othernames" class="p-value"></div>
                    <span class="p-label">Attributes</span>
                    <div id="p-attributes" class="p-value"></div>
                </div>
                <span class="p-label">Significance</span>
                <div id="p-note" class="p-value"></div>
                <div id="lineage-section">
                    <span class="p-label">Lineage</span>
                    <div id="p-lineage" class="p-value" style="border-left: 2px solid #333; padding-left: 10px;"></div>
                </div>
                <a id="p-wiki" href="#" target="_blank" class="wiki-btn">
                    Read on Wikipedia
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                        <polyline points="15 3 21 3 21 9"></polyline>
                        <line x1="10" y1="14" x2="21" y2="3"></line>
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
